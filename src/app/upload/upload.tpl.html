<div class="row" ng-controller="UploadCtrl">
  <h1 class="page-header">
    Upload form
    <small>by Thomas</small>
  </h1>
  <h2>Upload new files</h2>

  <div>
    <input type="text" ng-model="myModelObj" style="display: none">
    <!--
      Multi-file picker for upload
    <input type="file" ng-file-select="onFileSelect($files)" multiple accept="audio/*">
    -->

    <div class="button" ng-file-select="onFileSelect($files)" data-multiple="true"></div>
    <div id="drop-zone" class="upload-drop-zone" ng-file-drop="onFileSelect($files)"
         ng-file-drag-over-class="optional-css-class-name-or-function" ng-show="dropSupported">
      Just drag and drop files here
    </div>
    <div id="no-drop-zone" class="upload-drop-zone" ng-file-drop-available="dropSupported=true"
         ng-show="!dropSupported">HTML5 Drop File is not supported!
    </div>
    </div>
  <h2>Processed files</h2>
  <!-- Upload Finished -->
  <div class="js-upload-finished">
    <div class="list-group" ng:repeat="file in uploadedFiles">
      <a ng-if="file.finished" href="javascript:void(0)" ng-click="remove(uploadedFiles, $index)"
         class="list-group-item list-group-item-success">
        <span class="badge alert-success pull-right">Upload complete</span>{{ file.name }}
      </a>
      <a ng-if="!file.finished" href="javascript:void(0)" ng-click="remove(uploadedFiles, $index)"
         class="list-group-item list-group-item-info">
        <span class="badge alert-info pull-right">Upload in progress</span>{{ file.name }}
      </a>
    </div>
    </div>
  <h2>Existing files</h2>
  <audio media-player="mediaPlayer" data-playlist="mediaPlaylist">
  </audio>
  <div class="player-control">
    <div class="btn" ng-click="mediaPlayer.play()">
      <span>Simple Play</span>
      <i class="fa fa-play"></i>
    </div>
    <div class="btn" ng-click="mediaPlayer.playPause()">
      <i class="fa" ng-class="{ 'fa-pause': mediaPlayer.playing, 'fa-play': !mediaPlayer.playing }"></i>
    </div>
    <div class="btn" ng-click="mediaPlayer.next()">
      <span>Next</span>
      <i class="fa fa-step-forward"></i>
    </div>
    <div class="btn" ng-click="mediaPlayer.prev()">
      <i class="fa fa-step-backward"></i>
      <span>Prev</span>
    </div>
    <div class="btn btn-noclick">
      <span>currentTrack: <span class="badge">{{ mediaPlayer.currentTrack }}</span></span>
    </div>
    <div class="btn btn-noclick">
      <span><i class="fa fa-clock-o"></i>: <span class="badge">{{ mediaPlayer.formatTime }}</span></span>
    </div>
    <div class="btn btn-noclick">
      <span>volume: <span class="badge">{{ mediaPlayer.volume * 100 | number:0 }}%</span></span>
    </div>
    <div class="btn" ng-click="mediaPlayer.setVolume(mediaPlayer.volume - 0.1)">
      <span><i class="fa fa-volume-down"></i></span>
    </div>
    <div class="btn" ng-click="mediaPlayer.setVolume(mediaPlayer.volume + 0.1)">
      <span><i class="fa fa-volume-up"></i></span>
    </div>
    <div class="progress" ng-click="mediaPlayer.seek(mediaPlayer.duration * seekPercentage($event))">
      <div class="progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100"
           ng-style="{ width: mediaPlayer.currentTime * 100 / mediaPlayer.duration + '%' }"></div>
      <div class="time" ng-show="mediaPlayer.formatTime">
        <span>{{ mediaPlayer.formatTime }}</span><b>/</b><span>{{ mediaPlayer.formatDuration }}</span>
      </div>
    </div>
    </div>
  <table class="table table-striped">
    <tr>
      <th>Cover</th>
      <th>Title</th>
      <th>Artist</th>
      <th>Album</th>
      <th>Year</th>
      <th>File</th>
    </tr>
    <tr ng:repeat="song in songs">
      <td ng-if="song.cover"><img src="/song/{{ song.cover }}/cover"></td>
      <td ng-if="!song.cover">No cover available</td>
      <td>{{ song.title }}</td>
      <td>{{ song.artist }}</td>
      <td>{{ song.album }}</td>
      <td>{{ song.year }}</td>
      <td><a href="/song/{{ song.file_id }}/raw">Play raw</a></td>
    </tr>
  </table>
</div>